{
  "ROSTemplateFormatVersion": "2015-09-01",
  "Description": "Configure the AliyunROSStackGroupAdministrationRole to enable use of Alibaba Cloud ROS StackGroup.",
  "Parameters": {
    "AdministrationRole": {
      "Type": "String",
      "Default": "AliyunROSStackGroupAdministrationRole",
      "Description": "Role name of administration account"
    },
    "ExecutionRole": {
      "Type": "String",
      "Default": "AliyunROSStackGroupExecutionRole",
      "Description": "Execution role name of target account"
    }
  },
  "Resources": {
    "AliyunROSStackGroupAdministrationRole": {
      "Type": "ALIYUN::RAM::Role",
      "Properties": {
        "RoleName": {
          "Ref": "AdministrationRole"
        },
        "AssumeRolePolicyDocument": {
          "Version": 1,
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": ["ros.aliyuncs.com"]
              }
            }
          ]
        },
        "Policies": [
          {
            "PolicyName": {
              "Fn::Sub": [
                "AssumeRole-${ExecutionRole}",
                {
                  "ExecutionRole": {
                    "Ref": "ExecutionRole"
                  }
                }
              ]
            },
            "PolicyDocument": {
              "Statement": [
                {
                  "Effect": "Allow",
                  "Action": ["sts:AssumeRole"],
                  "Resource": [
                    "acs:ram::*:role/AliyunROSStackGroupExecutionRole"
                  ]
                }
              ],
              "Version": "1"
            }
          }
        ]
      }
    }
  },
  "Outputs": {
    "AdministrationRole": {
      "Value": {
        "Fn::GetAtt": ["AliyunROSStackGroupAdministrationRole", "RoleName"]
      }
    }
  }
}
