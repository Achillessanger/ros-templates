ROSTemplateFormatVersion: "2015-09-01"
Description: Configure the AliyunROSStackGroupAdministrationRole to enable use of Alibaba Cloud ROS StackGroup.
Parameters:
  AdministrationRole:
    Default: AliyunROSStackGroupAdministrationRole
    Description: Role name of administration account
    Type: String
  ExecutionRole:
    Default: AliyunROSStackGroupExecutionRole
    Description: Execution role name of target account
    Type: String
Resources:
  AliyunROSStackGroupAdministrationRole:
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service:
                - ros.aliyuncs.com
        Version: 1
      Policies:
        - PolicyDocument:
            Statement:
              - Action:
                  - sts:AssumeRole
                Effect: Allow
                Resource:
                  - acs:ram::*:role/AliyunStackGroupExecutionRole
            Version: "1"
          PolicyName:
            Fn::Sub:
              - AssumeRole-${ExecutionRole}
              - ExecutionRole:
                  Ref: ExecutionRole
      RoleName:
        Ref: AdministrationRole
    Type: ALIYUN::RAM::Role
Outputs:
  AdministrationRole:
    Value:
      Fn::GetAtt:
        - AliyunROSStackGroupAdministrationRole
        - RoleName
